<!doctype html>
<html>
<head>
	<title>Graph</title>
	<meta charset="utf-8">
	<link rel="stylesheet" href="style.css" type="text/css" media="screen" />
	<script type="text/javascript" src="canvas.js"></script>
	<script type="text/javascript" src="graph.js"></script>
</head>
<body>
	<div id="graph" style="width:700px; height:500px;">
		<script type="text/canvas">
			function setup(canvas) {
				canvas.size(700, 500);
				canvas.fps = 30;
				g = new Graph(canvas.element, 10);
				var n = {
					"1": {label:"home", href:"http://www.clips.ua.ac.be/pages/pattern-graph", css:"node-link-docs"},
					"3": {fill:"rgba(153,204,255,0.36)"},
					"4": {fill:"rgba(153,204,255,0.80)"},
					"5": {fill:"rgba(153,204,255,0.38)"},
					"6": {},
					"7": {},
					"8": {},
					"9": {fill:"rgba(153,204,255,0.37)"},
					"10": {},
					"11": {},
					"12": {fill:"rgba(153,204,255,0.60)"},
					"13": {fill:"rgba(153,204,255,0.25)"},
					"15": {fill:"rgba(153,204,255,0.49)"},
					"16": {},
					"17": {},
					"18": {fill:"rgba(153,204,255,0.32)"},
					"20": {fill:"rgba(153,204,255,0.29)"},
					"21": {fill:"rgba(153,204,255,0.31)"},
					"22": {},
					"23": {fill:"rgba(153,204,255,0.32)"},
					"24": {fill:"rgba(153,204,255,0.34)"},
					"25": {},
					"26": {},
					"27": {},
					"28": {},
					"29": {fill:"rgba(153,204,255,0.48)"},
					"30": {},
					"31": {fill:"rgba(153,204,255,0.43)"},
					"33": {},
					"34": {},
					"35": {},
					"36": {fill:"rgba(153,204,255,0.26)"},
					"37": {},
					"38": {fill:"rgba(153,204,255,0.23)"},
					"39": {fill:"rgba(153,204,255,0.22)"},
					"40": {},
					"41": {fill:"rgba(153,204,255,0.39)"},
					"42": {},
					"43": {},
					"44": {},
					"45": {fill:"rgba(153,204,255,0.20)"},
					"46": {fill:"rgba(153,204,255,0.63)"},
					"47": {},
					"48": {},
					"49": {},
					"50": {}
				};
				var e = [
					["18", "46", {weight:0.54}],
					["41", "46", {weight:0.61}],
					["1", "47", {weight:0.97}],
					["21", "9", {weight:0.14}],
					["12", "24", {weight:0.78}],
					["8", "46", {weight:0.64}],
					["46", "12", {weight:0.45}],
					["27", "18", {weight:0.03}],
					["7", "26", {weight:0.50}],
					["23", "12", {weight:0.16}],
					["35", "3", {weight:0.93}],
					["15", "45", {weight:0.90}],
					["15", "29", {weight:0.58}],
					["7", "33", {weight:0.26}],
					["40", "50", {weight:0.85}],
					["10", "15", {weight:0.91}],
					["1", "11", {weight:0.61}],
					["12", "31", {weight:0.17}],
					["18", "42", {weight:0.63}],
					["10", "49", {weight:0.78}],
					["6", "4", {weight:0.51}],
					["22", "34", {weight:0.94}],
					["11", "28", {weight:0.21}],
					["34", "21", {weight:0.29}],
					["7", "50", {weight:0.91}],
					["11", "36", {weight:0.66}],
					["47", "3", {weight:0.87}],
					["33", "15", {weight:0.87}],
					["7", "34", {weight:0.34}],
					["13", "25", {weight:0.61}],
					["7", "31", {weight:0.42}],
					["25", "17", {weight:0.96}],
					["7", "4", {weight:0.04}],
					["38", "8", {weight:0.15}],
					["9", "29", {weight:0.21}],
					["29", "20", {weight:0.25}],
					["44", "39", {weight:0.53}],
					["20", "4", {weight:0.16}],
					["36", "38", {weight:0.57}],
					["26", "24", {weight:0.51}],
					["37", "3", {weight:0.70}],
					["37", "34", {weight:0.04}],
					["45", "43", {weight:0.67}],
					["12", "23", {weight:0.36}],
					["11", "15", {weight:0.73}],
					["33", "18", {weight:0.10}],
					["28", "9", {weight:0.85}],
					["21", "15", {weight:0.74}],
					["36", "18", {weight:0.44}],
					["16", "46", {weight:0.22}],
					["30", "36", {weight:0.26}],
					["24", "6", {weight:0.83}],
					["11", "5", {weight:0.13}],
					["11", "38", {weight:0.56}],
					["7", "30", {weight:0.53}],
					["37", "10", {weight:0.06}],
					["4", "4", {weight:0.46}],
					["22", "35", {weight:0.61}],
					["40", "28", {weight:0.48}],
					["40", "9", {weight:0.86}],
					["42", "5", {weight:0.37}],
					["34", "35", {weight:0.98}],
					["36", "39", {weight:0.41}],
					["27", "7", {weight:0.88}],
					["24", "21", {weight:0.80}],
					["42", "49", {weight:0.88}],
					["9", "5", {weight:0.95}],
					["50", "36", {weight:0.96}],
					["46", "41", {weight:0.07}],
					["26", "15", {weight:0.03}],
					["20", "48", {weight:0.59}],
					["37", "12", {weight:0.64}],
					["25", "3", {weight:0.17}],
					["48", "16", {weight:0.32}],
					["9", "13", {weight:0.13}]
				];
				for (var id in n) {
					g.addNode(id, n[id]);
				}
				for (var i=0; i < e.length; i++) {
					var n1 = g.nodeset[e[i][0]];
					var n2 = g.nodeset[e[i][1]];
					g.addEdge(n1, n2, e[i][2]);
				}
				g.layout.k = 4.0; // Force constant (= edge length).
				g.layout.force = 0.01; // Repulsive strength.
				g.layout.repulsion = 50; // Repulsive radius.
				g.eigenvectorCentrality();
				g.betweennessCentrality();
				g.degreeCentrality();
				// Apply Node.weight to Node.radius.
				for (var i=0; i < g.nodes.length; i++) {
					var n = g.nodes[i];
					n.radius = n.radius + n.radius * n.weight;
				}
				// Apply Edge.length (leaves get shorter edges).
				for (var i=0; i < g.nodes.length; i++) {
					var e = g.nodes[i].edges();
					if (e.length == 1) {
						e[0].length *= 0.2;
					}
				}
			}
			function draw(canvas) {
				if (g.layout.iterations <= 500) {
					canvas.clear();
					//shadow();
					stroke(0);
					fill(0,0);
					g.update(2);
					g.draw(0.5, true);
				}
				g.drag(canvas.mouse);
			}
		</script>
	</div>
</body>
</html>